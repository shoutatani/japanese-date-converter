!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jQuery")):"function"==typeof define&&define.amd?define(["jQuery"],e):"object"==typeof exports?exports.JapaneseDateConverter=e(require("jQuery")):t.JapaneseDateConverter=e(t.jQuery)}(this,(function(t){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.r(e),r.d(e,"default",(function(){return u}));var u=function(){function t(e){var r=e.inputValue,n=e.settings;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"inputValue",void 0),a(this,"settings",void 0),a(this,"gengo",void 0),a(this,"gengoList",void 0),a(this,"formatOptions",void 0),this.inputValue=r,this.settings=n,this.gengoList=[{name:"M",ligature:"㍾",from:new Date("1868-01-25"),to:new Date("1912-07-29"),ggg:"明治",gg:"明"},{name:"T",ligature:"㍽",from:new Date("1912-07-30"),to:new Date("1926-12-24"),ggg:"大正",gg:"大"},{name:"S",ligature:"㍼",from:new Date("1926-12-25"),to:new Date("1989-01-07"),ggg:"昭和",gg:"昭"},{name:"H",ligature:"㍻",from:new Date("1989-01-08"),to:new Date("2019-04-30"),ggg:"平成",gg:"平"},{name:"R",ligature:"㋿",from:new Date("2019-05-01"),to:new Date,ggg:"令和",gg:"令"}],this.formatOptions={years:["ggg","gg","g","ee","e","yyyy","yy"],months:["mmmmm","mmmm","mmm","mm","m"],days:["dd","d"]}}var e,r,u;return e=t,(r=[{key:"execute",value:function(){return this.checkValue()?this.convert():this.inputValue}},{key:"checkValue",value:function(){return!(this.inputValue.length<7)}},{key:"getGengoFromWarekiLetter",value:function(t){var e=null;return this.gengoList.forEach((function(r,n){r.name!==t&&n+1!==Number.parseInt(t)||(e=r)}),this.gengoList),e}},{key:"hasWarekiLetter",value:function(){return this.inputValue.match(/^\d{7}$/)||this.inputValue.match(/^[A-Z1-9]{1}\d{6}$/)||this.inputValue.match(/^[A-Z1-9]{1}\d{2}.+\d{2}.+\d{2}/)}},{key:"getGengoFromDate",value:function(t){var e=this.gengoList.find((function(e){return t>=e.from&&t<=e.to}));return t<this.gengoList[0].from&&(e=this.gengoList[0]),t>this.gengoList[this.gengoList.length-1].from&&(e=this.gengoList[this.gengoList.length-1]),e}},{key:"getSeirekiYear",value:function(t,e){return t?t.from.getFullYear()+e-1:null}},{key:"getWarekiYear",value:function(t){var e=this.getGengoFromDate(t);return t.getFullYear()-(e.from.getFullYear()-1)}},{key:"getDate",value:function(t){switch(this.inputValue.length){case 7:var e=Number.parseInt(this.inputValue.substr(1,2)),r=Number.parseInt(this.inputValue.substr(3,2)),n=Number.parseInt(this.inputValue.substr(5,2)),a=this.getSeirekiYear(t,e);return new Date(a,r-1,n);case 8:var u=Number.parseInt(this.inputValue.substr(0,4)),i=Number.parseInt(this.inputValue.substr(4,2)),s=Number.parseInt(this.inputValue.substr(6,4));return new Date(u,i-1,s);case 9:var o=Number.parseInt(this.inputValue.substr(1,2)),g=Number.parseInt(this.inputValue.match(/\d{2}.+(\d{2}).+\d{2}/)?this.inputValue.match(/\d{2}.+(\d{2}).+\d{2}/)[1]:null),l=Number.parseInt(this.inputValue.match(/\d{2}.+\d{2}.+(\d{2})/)?this.inputValue.match(/\d{2}.+\d{2}.+(\d{2})/)[1]:null),c=this.getSeirekiYear(t,o);return new Date(c,g-1,l);case 10:var h=Number.parseInt(this.inputValue.substr(0,4)),m=Number.parseInt(this.inputValue.match(/\d{4}.+(\d{2}).+\d{2}/)?this.inputValue.match(/\d{4}.+(\d{2}).+\d{2}/)[1]:null),f=Number.parseInt(this.inputValue.match(/\d{4}.+\d{2}.+(\d{2})/)?this.inputValue.match(/\d{4}.+\d{2}.+(\d{2})/)[1]:null);return new Date(h,m-1,f)}return null}},{key:"searchFormatTarget",value:function(t){var e=this.formatOptions,r=null;return(r=e.years.find((function(e){return t.includes(e)})))||(r=e.months.find((function(e){return t.includes(e)})))?r:r=e.days.find((function(e){return t.includes(e)}))}},{key:"convertFormatTargetToValue",value:function(t,e,r){var n=["January","February","March","April","May","June","July","August","September","October","November","December"];switch(r){case"ggg":return e.ggg;case"gg":return e.gg;case"g":return e.name;case"ee":return this.getWarekiYear(t).toString().padStart(2,"0");case"e":return this.getWarekiYear(t).toString();case"yyyy":return t.getFullYear().toString();case"yy":return t.getFullYear().toString().substr(2,2);case"mmmmm":return n[t.getMonth()].substr(0,1);case"mmmm":return n[t.getMonth()];case"mmm":return n[t.getMonth()].substr(0,3);case"mm":return(t.getMonth()+1).toString().padStart(2,"0");case"m":return(t.getMonth()+1).toString();case"dd":return t.getDate().toString().padStart(2,"0");case"d":return t.getDate().toString();default:return null}}},{key:"convertDateByFormat",value:function(t,e,r){for(var n=r,a=this.searchFormatTarget(n);a;)n=n.replace(a,this.convertFormatTargetToValue(t,e,a)),a=this.searchFormatTarget(n);return n}},{key:"convert",value:function(){switch(this.inputValue.length){case 7:if(!this.hasWarekiLetter())return this.inputValue;var t=this.getGengoFromWarekiLetter(this.inputValue.substr(0,1)),e=this.getDate(t),r=this.settings.format;return this.convertDateByFormat(e,t,r);case 8:if(this.inputValue.match(/\D/))return this.inputValue;var n=this.getDate(),a=this.settings.format;return this.convertDateByFormat(n,null,a);case 9:if(!this.hasWarekiLetter())return this.inputValue;var u=this.getGengoFromWarekiLetter(this.inputValue.substr(0,1)),i=this.getDate(u),s=this.settings.format;return this.convertDateByFormat(i,null,s);case 10:var o=this.getDate(),g=this.getGengoFromDate(o),l=this.settings.format;return this.convertDateByFormat(o,g,l)}return null}}])&&n(e.prototype,r),u&&n(e,u),t}()},function(t,e,r){"use strict";r.r(e),function(t){var e,n=r(0);(e=t).fn.japanese_date_converter=function(t){var r=Object.assign({},{format:"geemmdd"},t);return this.on({change:function(t){var a=(e(this).val()||"").toString(),u=new n.default({inputValue:a,settings:r});e(this).val(u.execute())}}),this}}.call(this,r(2))},function(e,r){e.exports=t}])}));