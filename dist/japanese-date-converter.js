!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.JapaneseDateConverter=e():t.JapaneseDateConverter=e()}(this,(function(){return(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}t.r(e),t.d(e,{default:()=>a});var a=function(){function t(e){var r=e.inputValue,a=e.settings;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n(this,"inputValue",void 0),n(this,"settings",void 0),n(this,"gengo",void 0),n(this,"gengoList",void 0),n(this,"formatOptions",void 0),this.inputValue=r,this.settings=a,this.gengoList=[{name:"M",ligature:"㍾",from:new Date("1868-01-25"),to:new Date("1912-07-29"),ggg:"明治",gg:"明"},{name:"T",ligature:"㍽",from:new Date("1912-07-30"),to:new Date("1926-12-24"),ggg:"大正",gg:"大"},{name:"S",ligature:"㍼",from:new Date("1926-12-25"),to:new Date("1989-01-07"),ggg:"昭和",gg:"昭"},{name:"H",ligature:"㍻",from:new Date("1989-01-08"),to:new Date("2019-04-30"),ggg:"平成",gg:"平"},{name:"R",ligature:"㋿",from:new Date("2019-05-01"),to:new Date,ggg:"令和",gg:"令"}],this.formatOptions={years:["ggg","gg","g","ee","e","yyyy","yy"],months:["mmmmm","mmmm","mmm","mm","m"],days:["dd","d"]}}var e,a;return e=t,(a=[{key:"execute",value:function(){return this.checkValue()?this.convert():this.inputValue}},{key:"checkValue",value:function(){return!(this.inputValue.length<7)}},{key:"getGengoFromWarekiLetter",value:function(t){var e=null;return this.gengoList.forEach((function(r,n){r.name!==t&&n+1!==Number.parseInt(t)||(e=r)}),this.gengoList),e}},{key:"hasWarekiLetter",value:function(){return this.inputValue.match(/^\d{7}$/)||this.inputValue.match(/^[A-Z1-9]{1}\d{6}$/)||this.inputValue.match(/^[A-Z1-9]{1}\d{2}.+\d{2}.+\d{2}/)}},{key:"getGengoFromDate",value:function(t){var e=this.gengoList.find((function(e){return t>=e.from&&t<=e.to}));return t<this.gengoList[0].from&&(e=this.gengoList[0]),t>this.gengoList[this.gengoList.length-1].from&&(e=this.gengoList[this.gengoList.length-1]),e}},{key:"getSeirekiYear",value:function(t,e){return t?t.from.getFullYear()+e-1:null}},{key:"getWarekiYear",value:function(t){var e=this.getGengoFromDate(t);return t.getFullYear()-(e.from.getFullYear()-1)}},{key:"getDate",value:function(t){switch(this.inputValue.length){case 7:var e=Number.parseInt(this.inputValue.substr(1,2)),r=Number.parseInt(this.inputValue.substr(3,2)),n=Number.parseInt(this.inputValue.substr(5,2)),a=this.getSeirekiYear(t,e);return new Date(a,r-1,n);case 8:var u=Number.parseInt(this.inputValue.substr(0,4)),i=Number.parseInt(this.inputValue.substr(4,2)),s=Number.parseInt(this.inputValue.substr(6,4));return new Date(u,i-1,s);case 9:var o=Number.parseInt(this.inputValue.substr(1,2)),g=Number.parseInt(this.inputValue.match(/\d{2}.+(\d{2}).+\d{2}/)?this.inputValue.match(/\d{2}.+(\d{2}).+\d{2}/)[1]:null),l=Number.parseInt(this.inputValue.match(/\d{2}.+\d{2}.+(\d{2})/)?this.inputValue.match(/\d{2}.+\d{2}.+(\d{2})/)[1]:null),h=this.getSeirekiYear(t,o);return new Date(h,g-1,l);case 10:var m=Number.parseInt(this.inputValue.substr(0,4)),c=Number.parseInt(this.inputValue.match(/\d{4}.+(\d{2}).+\d{2}/)?this.inputValue.match(/\d{4}.+(\d{2}).+\d{2}/)[1]:null),p=Number.parseInt(this.inputValue.match(/\d{4}.+\d{2}.+(\d{2})/)?this.inputValue.match(/\d{4}.+\d{2}.+(\d{2})/)[1]:null);return new Date(m,c-1,p)}return null}},{key:"searchFormatTarget",value:function(t){var e=this.formatOptions,r=null;return(r=e.years.find((function(e){return t.includes(e)})))||(r=e.months.find((function(e){return t.includes(e)})))?r:r=e.days.find((function(e){return t.includes(e)}))}},{key:"convertFormatTargetToValue",value:function(t,e,r){var n=["January","February","March","April","May","June","July","August","September","October","November","December"];switch(r){case"ggg":return e.ggg;case"gg":return e.gg;case"g":return e.name;case"ee":return this.getWarekiYear(t).toString().padStart(2,"0");case"e":return this.getWarekiYear(t).toString();case"yyyy":return t.getFullYear().toString();case"yy":return t.getFullYear().toString().substr(2,2);case"mmmmm":return n[t.getMonth()].substr(0,1);case"mmmm":return n[t.getMonth()];case"mmm":return n[t.getMonth()].substr(0,3);case"mm":return(t.getMonth()+1).toString().padStart(2,"0");case"m":return(t.getMonth()+1).toString();case"dd":return t.getDate().toString().padStart(2,"0");case"d":return t.getDate().toString();default:return null}}},{key:"convertDateByFormat",value:function(t,e,r){for(var n=r,a=this.searchFormatTarget(n);a;)n=n.replace(a,this.convertFormatTargetToValue(t,e,a)),a=this.searchFormatTarget(n);return n}},{key:"convert",value:function(){switch(this.inputValue.length){case 7:if(!this.hasWarekiLetter())return this.inputValue;var t=this.getGengoFromWarekiLetter(this.inputValue.substr(0,1)),e=this.getDate(t),r=this.settings.format;return this.convertDateByFormat(e,t,r);case 8:if(this.inputValue.match(/\D/))return this.inputValue;var n=this.getDate(),a=this.settings.format;return this.convertDateByFormat(n,null,a);case 9:if(!this.hasWarekiLetter())return this.inputValue;var u=this.getGengoFromWarekiLetter(this.inputValue.substr(0,1)),i=this.getDate(u),s=this.settings.format;return this.convertDateByFormat(i,null,s);case 10:var o=this.getDate(),g=this.getGengoFromDate(o),l=this.settings.format;return this.convertDateByFormat(o,g,l)}return null}}])&&r(e.prototype,a),t}();return e})()}));